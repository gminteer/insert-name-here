#!/usr/bin/env node
require('dotenv').config();
const faker = require('faker');
const Sequelize = require('sequelize');

const sequelize = new Sequelize(process.env.JAWSDB_URL);
const {User, Profile, Partnership} = require('../models')(sequelize);
const COUNT = 16;

(async () => {
  await sequelize.sync({force: true});
  for (const _ of Array(COUNT).keys()) {
    const firstName = faker.name.firstName();
    const lastName = faker.name.lastName();
    const {id: userId} = await User.create({
      firstName,
      lastName,
      password: '1234',
      username: faker.internet.userName(firstName, lastName),
      email: faker.internet.email(firstName, lastName),
    });
    await Profile.create({
      userId,
      github: faker.internet.userName(firstName, lastName),
      linkedIn: faker.internet.userName(firstName, lastName),
      picture: faker.internet.avatar(),
      portfolio: faker.internet.url(),
      resume: faker.internet.url(),
      website: faker.internet.url(),
    });
  }

  for (let i = 2; i < 17; i++) {
    let status;
    if (i % 4 === 0) status = 'MATCHED';
    if (i % 4 === 1) status = 'ACTIVE';
    if (i % 4 === 2) status = 'BLOCKED';
    if (i % 4 === 3) status = 'CLOSED';
    if (i % 2) await Partnership.create({status, primaryId: 1, secondaryId: i});
    else await Partnership.create({status, primaryId: i, secondaryId: 1});
  }
})();
